
## Enumeración

| Comando                                                                                          | Descripción                                                                                                                                                                             | Ejemplo                                                                                          |
| ------------------------------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------ |
| ftp 1.2.3.4 (\<port>)                                                                            | **Iniciar una conexión FTP**                                                                                                                                                            | **[!]** Podemos probar con el usuario "anonymous" y la contraseña la dejo en blanco              |
| sesion_FTP> status                                                                               | Muestra **información varia del servicio FTP**                                                                                                                                          |                                                                                                  |
| sesion_FTP> debug                                                                                | Activa la depuración debug                                                                                                                                                              |                                                                                                  |
| sesion_FTP> trace                                                                                | Activa el seguimiento de paquetes                                                                                                                                                       |                                                                                                  |
| sesion_FTP> ls -R                                                                                | Lista directorios de forma recursiva del servicio FTP                                                                                                                                   |                                                                                                  |
| sesion_FTP>get <nombre_archivo>                                                                  | **Descarga** del servidor dicho archivo                                                                                                                                                 |                                                                                                  |
| wget -m --no-passive ftp://anonymous: anonymous@1.2.3.4                                          | **Descarga la totalidad** de las carpetas de un servicio FTP. Después con `"tree ."` podemos consultrar su estructura.                                                                  | wget -m --no-passive ftp://anonymous:anonymous @10.129.14.136                                    |
| sesion_FTP>put <nombre_archivo>                                                                  | **Sube un archivo** al servidor FTP                                                                                                                                                     | sesion_FTP>put shell.exe                                                                         |
| `cat /etc/vsftpd.conf`                                                                           | Para servidores vsFTPd, ese **archivo contiene los parámetros de configuración establecidos en el servidor.**                                                                           |                                                                                                  |
| `cat /etc/ftpusers` o<br>`cat /etc/vsftpd/ftpusers`                                              | Para servidores FTP (entre otros, vsFTPd), este documento contiene los usuarios bloqueados a utilizar dicho servicio                                                                    |                                                                                                  |
| `nc -nv 1.2.3.4 <port_a_atacar>` o <br>`nc -nv -p <num_port_origen> 1.2.3.4 <num_port_a_atacar>` | **Para detectar la versión del servicio FTP que a veces nmap obvia en el resumen.** FTP suele correr en el puerto 21. Puerto origen recomendado: 53 (DNS), que no suele estar filtrado. | `nc -nv 1.2.3.4 <port_a_atacar>` o <br>`nc -nv -p <num_port_origen> 1.2.3.4 <num_port_a_atacar>` |
## Ataque
| Comando                                                              | Descripción                                          | Ejemplo                                                               |
| -------------------------------------------------------------------- | ---------------------------------------------------- | --------------------------------------------------------------------- |
| hydra -l \<user> -P /ruta/al/diccionario.txt ftp://<ip_servidor_ftp> | Fuerza bruta contra la contraseña de un servidor FTP | hydra -l fiona -P /usr/share/wordlists/rockyou.txt ftp://10.129.203.7 |

